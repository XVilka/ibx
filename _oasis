OASISFormat:      0.3
OCamlVersion:     >= 3.12
Name:             ibx
Version:          0.5.6
Synopsis:         OCaml implementation of the Interactive Brokers TWS API
Description:      IBX is a pure OCaml implementation of the Interactive Brokers
                  Trader Workstation API (TWS API) built on top of
                  Jane Street's Core and Async library.
Authors:          Oliver Gu <gu.oliver@yahoo.com>
Maintainers:      Oliver Gu <gu.oliver@yahoo.com>
License:          LGPL-2.1+ with OCaml linking exception
OCamlVersion:     >= 3.12
FindlibVersion:   >= 1.3.1
Homepage:         https://bitbucket.org/ogu/ibx
Plugins:          META (0.3), StdFiles (0.3), DevFiles (0.3)
XStdFilesREADME:  false
BuildTools:       ocamlbuild, ocamldoc
PostDistcleanCommand: $rmdir ibx.log

# Flags

Flag examples
  Description:    Build all examples
  Default:        false

# Library

Library ibx
  Path:           lib
  FindlibName:    ibx
  Pack:           true
  Modules:        Config,
                  Std_internal,
                  Send_tag,
                  Recv_tag,
                  Tws_prot,
                  Twsable,
                  Pickable,
                  Unpickable,
                  Query_intf,
                  Submit_order,
                  Execution_id,
                  Query,
                  Response_intf,
                  Response,
                  Symbol,
                  Exchange,
                  Currency,
                  Price,
                  Account_code,
                  Raw_contract_intf,
                  Raw_contract,
                  Contract,
                  Raw_order_intf,
                  Raw_order,
                  Order,
                  Ib,
                  Tws_reqs,
                  Tws,
                  Client_id,
                  Client_intf,
                  Std
  BuildDepends:   core (>= 109.07.00),
                  async,
                  sexplib.syntax,
                  fieldslib.syntax,
                  threads,
                  str
  CompiledObject: best

# Tests

Executable test_runner
  Path:           lib_test
  MainIs:         test_runner.ml
  Install:        false
  BuildDepends:   ibx, core_extended
  CompiledObject: best

Test test_runner
  Run$:           flag(tests)
  Command:        $test_runner
  WorkingDirectory: lib_test

# Examples

Executable "buy-market-order"
  Build$:         flag(examples)
  Path:           examples
  MainIs:         buy_market_order.ml
  Install:        false
  BuildDepends:   ibx, core_extended
  CompiledObject: best

Executable "demultiplex"
  Build$:         flag(examples)
  Path:           examples
  MainIs:         demultiplex.ml
  Install:        false
  BuildDepends:   ibx, core_extended
  CompiledObject: best

Executable "interactive-quotes"
  Build$:         flag(examples)
  Path:           examples
  MainIs:         interactive_quotes.ml
  Install:        false
  BuildDepends:   ibx, core_extended
  CompiledObject: best

Executable "last-price"
  Build$:         flag(examples)
  Path:           examples
  MainIs:         last_price.ml
  Install:        false
  BuildDepends:   ibx
  CompiledObject: best

Executable "plot-hist-bars"
  Build$:         flag(examples)
  Path:           examples
  MainIs:         plot_hist_bars.ml
  Install:        false
  BuildDepends:   ibx, core_extended
  CompiledObject: best

Executable "plot-taq-data"
  Build$:         flag(examples)
  Path:           examples
  MainIs:         plot_taq_data.ml
  Install:        false
  BuildDepends:   ibx
  CompiledObject: best

Executable "print-market-depth"
  Build$:         flag(examples)
  Path:           examples
  MainIs:         print_market_depth.ml
  Install:        false
  BuildDepends:   ibx
  CompiledObject: best

Executable "print-option-data"
  Build$:         flag(examples)
  Path:           examples
  MainIs:         print_option_data.ml
  Install:        false
  BuildDepends:   ibx
  CompiledObject: best

Executable "quote-table"
  Build$:         flag(examples)
  Path:           examples
  MainIs:         quote_table.ml
  Install:        false
  BuildDepends:   ibx, core_extended
  CompiledObject: best

Executable "server-time"
  Build$:         flag(examples)
  Path:           examples
  MainIs:         server_time.ml
  Install:        false
  BuildDepends:   ibx
  CompiledObject: best

Executable "show-contract-specs"
  Build$:         flag(examples)
  Path:           examples
  MainIs:         show_contract_specs.ml
  Install:        false
  BuildDepends:   ibx
  CompiledObject: best

Executable "submit-orders"
  Build$:         flag(examples)
  Path:           examples
  MainIs:         submit_orders.ml
  Install:        false
  BuildDepends:   ibx
  CompiledObject: best

# Documentation

Document API
  Title:           API reference for IBX
  Type:            Ocamlbuild (0.3)
  Install:         true
  InstallDir:      $docdir/api
  BuildTools:      ocamldoc
  XOCamlbuildPath: .
  XOCamlbuildLibraries: ibx
